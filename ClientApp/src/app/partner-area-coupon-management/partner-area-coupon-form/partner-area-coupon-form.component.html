<div class="container">
    <div class="row">
      <div class="col-lg-6 mx-auto">
        <div class="card card-signin my-5">
          <div class="card-body">
            <h5 class="card-title text-center">Cadastro de Cupom</h5>
  
 
            <form [formGroup]='form'>
                <div class="form-group">
                    <label>Código:</label>
                    <input type="text" maxlength="256" formControlName="codigo" placeholder="Informe o código..." class="form-control">
                  </div>
                  <div *ngIf="submitted && f.codigo.errors">
                    <p *ngIf="f.codigo.errors.required" class="text-danger small">* Informe o código</p>
                  </div>
              <div class="form-group">
                <label>Descrição:</label>
                <input type="text" maxlength="256" formControlName="descricao" placeholder="Informe a descrição..." class="form-control">
              </div>
              <div *ngIf="submitted && f.descricao.errors">
                <p *ngIf="f.descricao.errors.required" class="text-danger small">* Informe a descrição</p>
              </div>

              <div class="form-group">
                <label>Data inicial:</label>
                <div class="input-group">
                  <input class="form-control" placeholder="dd/mm/yyyy" name="dataInicial" formControlName="dataInicial"
                    ngbDatepicker #d="ngbDatepicker">
                  <div class="input-group-append">
                    <button class="btn btn-primary" (click)="d.toggle()" type="button">
                      <i class="fa fa-calendar-alt"></i>
                    </button>
                  </div>
                </div>
              </div>
                <div *ngIf="submitted && f.dataInicial.errors">
                  <p *ngIf="f.dataInicial.errors.required" class="text-danger small">* Selecione a data inicial do cupom
                  </p>
                </div>

                <div class="form-group">
                  <label>Data final:</label>
                  <div class="input-group">
                    <input class="form-control" placeholder="dd/mm/yyyy" name="dataFinal" formControlName="dataFinal"
                      ngbDatepicker #dp="ngbDatepicker">
                    <div class="input-group-append">
                      <button class="btn btn-primary" (click)="dp.toggle()" type="button">
                        <i class="fa fa-calendar-alt"></i>
                      </button>
                    </div>
                  </div>
                </div>
                  <div *ngIf="submitted && f.dataFinal.errors">
                    <p *ngIf="f.dataFinal.errors.required" class="text-danger small">* Selecione a data final do cupom
                    </p>
                  </div>

              <div class="form-group">
                <label>Quantidade de vezes que o cliente poderá usar o cupom:</label>
                <input currencyMask max="99999999"
                [options]="{ prefix: '', thousands: '', decimal: '', precision: 0, allowNegative: false }"
                maxlength="8" type="text" formControlName="quantidade"
                placeholder="Informe a quantidade..." class="form-control">
              </div>
              <div *ngIf="submitted && f.quantidade.errors">
                <p *ngIf="f.quantidade.errors.required" class="text-danger small">* Informe a quantidade</p>
              </div>

              <div class="form-group">
                <label>Tipo de desconto:</label>
                <select class="form-control" formControlName="tipo">
                  <option [ngValue]="tipo.value" *ngFor="let tipo of lstTipos">
                    {{tipo.label}}</option>
                </select>
                <div *ngIf="submitted && f.tipo.errors">
                  <p *ngIf="f.tipo.errors.required" class="text-danger small">* Seleção de Tipo é
                    obrigatória</p>
                </div>
              </div>

              <div class="form-group">
                  <label>Valor:</label>
                  <input currencyMask max="99999999"
                    [options]="{ prefix: '', thousands: '.', decimal: ',', precision: 2, allowNegative: false }"
                    maxlength="18" type="text" formControlName="valor" placeholder="Informe o valor..."
                    class="form-control">
                </div>
                <div *ngIf="submitted && f.valor.errors">
                  <p *ngIf="f.valor.errors.required" class="text-danger small">* Informe um valor</p>
                </div>
                <div class="form-group">
                  <label>Valor mínimo para aplicar o cupom:</label>
                  <input currencyMask max="99999999"
                    [options]="{ prefix: '', thousands: '.', decimal: ',', precision: 2, allowNegative: false }"
                    maxlength="18" type="text" formControlName="valorMinimo"
                    placeholder="Informe o valor minimo..." class="form-control">
                </div>
                <div *ngIf="submitted && f.valorMinimo.errors">
                  <p *ngIf="f.valorMinimo.errors.required" class="text-danger small">* Informe um valor</p>
                </div>

                <div class="form-group">
                    <label>Para todos os clientes: </label>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" (change)="handleChange($event)" name="geral"
                        id="geralYes" value="true" formControlName="geral">
                      <label class="form-check-label" for="geralYes">Sim</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" (change)="handleChange($event)" name="geral"
                        id="geralNo" value="false" formControlName="geral">
                      <label class="form-check-label" for="geralNo">Não</label>
                    </div>
                  </div>
                  <div *ngIf="submitted && f.geral.errors">
                    <p *ngIf="f.geral.errors.required" class="text-danger small">* Informe se o cupom estará disponível para todos os clientes.
                    </p>
                  </div>

                  <div class="form-group" *ngIf="isGeral">
                    <label>Cliente:</label>
                    <select class="form-control" formControlName="cliente">
                      <option [value]="cliente.id" *ngFor="let cliente of lstClientes">{{cliente.name}}</option>
                    </select>
                  </div>
                  <div *ngIf="submitted && f.cliente.errors">
                    <p *ngIf="f.cliente.errors.required" class="text-danger small">* Informe o cliente</p>
                  </div>

            </form>
  
  
  
  
            <button class="btn btn-outline-dark text-uppercase" (click)="onSave()">
              <i class="fas fa-save"></i>
              Salvar</button>
            <button type="button" class="btn btn-outline-dark ml-2 text-uppercase" (click)="onCancel()">
              <i class="fa fa-arrow-circle-left"></i> Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>